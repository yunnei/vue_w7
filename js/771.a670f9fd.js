"use strict";(self["webpackChunkvue_w7"]=self["webpackChunkvue_w7"]||[]).push([[771],{8771:function(s,t,a){a.r(t),a.d(t,{default:function(){return N}});var e=a(6252),o=a(9963);const n={class:"navbar navbar-expand-lg navbar-light bg-light"},l={class:"container-fluid"},i=(0,e.Uk)("後台"),r=(0,e._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,e._)("span",{class:"navbar-toggler-icon"})],-1),c={class:"collapse navbar-collapse",id:"navbarNav"},u={class:"navbar-nav"},h={class:"nav-item"},d=(0,e.Uk)("產品列表"),v={class:"nav-item"},g=(0,e.Uk)("訂單管理"),p={class:"nav-item"},m=(0,e.Uk)("優惠券"),b={class:"nav-item"};function k(s,t,a,k,_,w){const f=(0,e.up)("router-link"),$=(0,e.up)("toast-message"),x=(0,e.up)("router-view");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("nav",n,[(0,e._)("div",l,[(0,e.Wm)(f,{to:"/admin",class:"navbar-brand"},{default:(0,e.w5)((()=>[i])),_:1}),r,(0,e._)("div",c,[(0,e._)("ul",u,[(0,e._)("li",h,[(0,e.Wm)(f,{to:"/admin/products",class:"nav-link"},{default:(0,e.w5)((()=>[d])),_:1})]),(0,e._)("li",v,[(0,e.Wm)(f,{to:"/admin/orders",class:"nav-link"},{default:(0,e.w5)((()=>[g])),_:1})]),(0,e._)("li",p,[(0,e.Wm)(f,{to:"/admin/coupons",class:"nav-link"},{default:(0,e.w5)((()=>[m])),_:1})]),(0,e._)("li",b,[(0,e._)("a",{href:"#",class:"nav-link",onClick:t[0]||(t[0]=(0,o.iM)(((...s)=>w.logout&&w.logout(...s)),["prevent"]))},"登出")])])])])]),(0,e.Wm)($),_.loginStatus?((0,e.wg)(),(0,e.j4)(x,{key:0})):(0,e.kq)("",!0)],64)}var _=a(3577);const w={class:"position-fixed top-0 end-0",style:{"z-index":"1100"}},f={class:"d-flex"},$={class:"toast-body"},x=["onClick"];function y(s,t,a,o,n,l){return(0,e.wg)(),(0,e.iD)("div",w,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.messages,((s,t)=>((0,e.wg)(),(0,e.iD)("div",{key:t,class:"toast-container m-2"},[(0,e._)("div",{class:(0,_.C_)(["toast show text-white border-0",`bg-${s.style}`]),role:"alert","aria-live":"assertive","aria-atomic":"true"},[(0,e._)("div",f,[(0,e._)("div",$,(0,_.zw)(s.content),1),(0,e._)("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","aria-label":"Close",onClick:s=>l.toastClear(t)},null,8,x)])],2)])))),128))])}var C=a(9868),S={data(){return{messages:[]}},methods:{toastShow(){setTimeout((()=>{this.messages.shift()}),5e3)},toastClear(s){this.messages.splice(s,1)}},mounted(){C.Z.on("push-message",(s=>{const{style:t="success",content:a}=s;this.messages.push({style:t,content:a}),this.toastShow()}))}},W=a(3744);const D=(0,W.Z)(S,[["render",y]]);var U=D,z={components:{ToastMessage:U},data(){return{loginStatus:!1}},methods:{checkLogin(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hextoken\s*=\s*([^;]*).*$)|^.*$/,"$1");if(s){this.$http.defaults.headers.common.Authorization=s;const t="https://vue3-course-api.hexschool.io/v2/api/user/check";this.$http.post(t).then((()=>{this.loginStatus=!0})).catch((s=>{alert(s.response.data.message),this.$router.push("/login")}))}else alert("請先登入"),this.$router.push("/login")},logout(){const s="https://vue3-course-api.hexschool.io/v2/logout";this.$http.post(s).then((s=>{this.$router.push("/"),alert(s.data.message)})).catch((s=>{this.$httpMessageState(s.response,s.response.data.message)}))}},mounted(){this.checkLogin()}};const M=(0,W.Z)(z,[["render",k]]);var N=M}}]);
//# sourceMappingURL=771.a670f9fd.js.map